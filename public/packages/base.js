jQuery(function(a){var i=a("meta[name=csrf-token]").attr("content"),k=a("meta[name=csrf-param]").attr("content");a.fn.extend({triggerAndReturn:function(b,g){var h=new a.Event(b);this.trigger(h,g);return h.result!==false},callRemote:function(){var b=this,g=b.attr("method")||b.attr("data-method")||"GET",h=b.attr("action")||b.attr("href"),d=b.attr("data-type")||a.ajaxSettings&&a.ajaxSettings.dataType;if(h===undefined)throw"No URL specified for remote call (action or href must be present).";else{var e=
a(this),c=b.is("form")?b.serializeArray():[];a.ajax({url:h,data:c,dataType:d,type:g.toUpperCase(),beforeSend:function(f){f.setRequestHeader("Accept","text/javascript");if(e.triggerHandler("ajax:beforeSend")===false)return false},success:function(f,l,m){b.trigger("ajax:success",[f,l,m])},complete:function(f){b.trigger("ajax:complete",f)},error:function(f,l,m){b.trigger("ajax:error",[f,l,m])}})}}});a("body").delegate("a[data-confirm], button[data-confirm], input[data-confirm]","click.rails",function(){var b=
a(this);if(b.triggerAndReturn("confirm"))if(!confirm(b.attr("data-confirm")))return false});a("form[data-remote]").live("submit.rails",function(b){a(this).callRemote();b.preventDefault()});a("a[data-remote],input[data-remote]").live("click.rails",function(b){a(this).callRemote();b.preventDefault()});a("a[data-method]:not([data-remote])").live("click.rails",function(b){var g=a(this),h=g.attr("href");g=g.attr("data-method");h=a('<form method="post" action="'+h+'"></form>');g='<input name="_method" value="'+
g+'" type="hidden" />';if(k!==undefined&&i!==undefined)g+='<input name="'+k+'" value="'+i+'" type="hidden" />';h.hide().append(g).appendTo("body");b.preventDefault();h.submit()});var j=function(){a(this).find("input[data-disable-with]").each(function(){var b=a(this);b.data("enable-with",b.val()).attr("value",b.attr("data-disable-with")).attr("disabled","disabled")})};a("form[data-remote]:has(input[data-disable-with])").live("ajax:before.rails",j);a("form:not([data-remote]):has(input[data-disable-with])").live("submit.rails",
j);a("form[data-remote]:has(input[data-disable-with])").live("ajax:complete.rails",function(){a(this).find("input[data-disable-with]").each(function(){var b=a(this);b.removeAttr("disabled").val(b.data("enable-with"))})});j=a().jquery;j==="1.4.3"||j==="1.4.4"||alert("This rails.js does not support the jQuery version you are using. Please read documentation.")});
(function(a){function i(d,e){d=a(d);var c=d.clone().empty(),f;d.contents().each(function(){var l=e-c.text().length;if(l!=0)(f=this.nodeType==3?k(this,l):i(this,l))&&c.append(f)});return c}function k(d,e){var c=j(d.data);if(h)c=c.replace(/^ /,"");h=!!c.match(/ $/);c=c.slice(0,e);return c=a("<div/>").text(c).html()}function j(d){return d.replace(/\s+/g," ")}function b(d){var e=a(d),c=e.children(":last");if(!c)return d;d=c.css("display");if(!d||d=="inline")return e;return b(c)}function g(d){var e=a(d).children(":last");
if(e&&e.is("p"))return e;return d}var h=true;a.fn.truncate=function(d){var e=a.extend({},a.fn.truncate.defaults,d);a(this).each(function(){if(!(a.trim(j(a(this).text())).length<=e.max_length)){var c=this.nodeType==3?k(this,e.max_length-e.more.length-3):i(this,e.max_length-e.more.length-3),f=a(this).hide();c.insertAfter(f);b(c).append(' (<a href="#show more content">'+e.more+"</a>)");g(f).append(' (<a href="#show less content">'+e.less+"</a>)");c.find("a:last").click(function(){c.hide();f.show();return false});
f.find("a:last").click(function(){c.show();f.hide();return false})}})};a.fn.truncate.defaults={max_length:100,more:"...more",less:"less"}})(jQuery);
jQuery.fn.collapseDiv=function(){return this.each(function(){var a=jQuery(this);a.find("div");a.addClass("my-collapse");a.find("div").hide();a.find("h2").prepend('<span class="expand" />');a.addClass("expanded");jQuery("span.expand").toggle(function(){jQuery(this).toggleClass("contract").parent().next("div").slideDown();jQuery(this).parent().toggleClass("expanded")},function(){jQuery(this).toggleClass("contract").parent().next("div").slideUp();jQuery(this).parent().toggleClass("expanded")})})};
jQuery.fn.quickTree=function(){return this.each(function(){var a=jQuery(this),i=a.find("li");a.addClass("tree");a.find("ul").hide();i.each(function(){if(jQuery(this).children("ul").length>0){jQuery(this).addClass("root").contents(":first").wrap('<span class="expand" />');jQuery(this).parent().addClass("expanded")}});jQuery("span.expand").toggle(function(){jQuery(this).toggleClass("contract").nextAll("ul").slideDown();jQuery(this).parent().toggleClass("expanded")},function(){jQuery(this).toggleClass("contract").nextAll("ul").slideUp();
jQuery(this).parent().toggleClass("expanded")})})};
jQuery(document).ready(function(){jQuery(".truncate").truncate({max_length:500});(function(){var a=jQuery(".person-email").get(0);if(a!=undefined){email_name=a.innerHTML.split(/ /)[0];email_domain=a.innerHTML.split(/ /)[2];email_string=[email_name,email_domain].join("@");jQuery(a).replaceWith("<a id='email' href='mailto:"+email_string+"'>"+email_string+"</a>")}})();jQuery(".quickTree").quickTree();jQuery(".collapsable").collapseDiv();jQuery(".quickTree").prepend("<a href='#' class='expand_all'>[Expand All]</a>");jQuery(".expand_all").toggle(function(){jQuery("span.expand:not(.contract)").trigger("click");
jQuery(this).text("[Collapse All]")},function(){jQuery("span.expand.contract").trigger("click");jQuery(this).text("[Expand All]")});jQuery(".deleter").live("click",function(a){a.preventDefault();path=jQuery(this).attr("href");jQuery(this).parent().hide("slow");jQuery.ajax({type:"DELETE",url:path})});url="/users?";jQuery.get(url.concat(Math.random()))});function remove_fields(a){jQuery(a).prev("input[type=hidden]").val("1");jQuery(a).parent().parent(".inputs").first().hide()}
function add_fields(a,i,k){var j=(new Date).getTime();i=RegExp("new_"+i,"g");jQuery(a).prev().append(k.replace(i,j))};
